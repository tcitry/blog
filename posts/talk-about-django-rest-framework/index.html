<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="æœ€è¿‘åˆé‡æ–°æ¥è§¦ DRFï¼Œç¿»çœ‹æ–‡æ¡£å‘ç°ï¼Œå½“æ—¶å¾ˆéš¾ç†è§£çš„ä¸œè¥¿ï¼Œå¦‚ä»Šä¸€çœ‹å°±æ‡‚äº†ï¼Œé¡ºå¸¦çœ‹äº†æºç ï¼Œä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œè‡³å°‘æ¯” Django çš„æºç ç®€å•ä¸å°‘ã€‚ä¸‹é¢å¼€å§‹ä» DRF çš„">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="æµ…è°ˆ Django-REST-Framework çš„è®¾è®¡ä¸æºç " />
<meta property="og:description" content="æœ€è¿‘åˆé‡æ–°æ¥è§¦ DRFï¼Œç¿»çœ‹æ–‡æ¡£å‘ç°ï¼Œå½“æ—¶å¾ˆéš¾ç†è§£çš„ä¸œè¥¿ï¼Œå¦‚ä»Šä¸€çœ‹å°±æ‡‚äº†ï¼Œé¡ºå¸¦çœ‹äº†æºç ï¼Œä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œè‡³å°‘æ¯” Django çš„æºç ç®€å•ä¸å°‘ã€‚ä¸‹é¢å¼€å§‹ä» DRF çš„" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yindongliang.com/posts/talk-about-django-rest-framework/" />
<meta property="article:published_time" content="2017-04-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-04-20T00:00:00+00:00" />
<title>æµ…è°ˆ Django-REST-Framework çš„è®¾è®¡ä¸æºç  | Yindongliang</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.d92e572ecaecb8ab81df83c495fc50c9330006fab2d0600e9c3ab1d52656c8ab.css" integrity="sha256-2S5XLsrsuKuB34PElfxQyTMABvqy0GAOnDqx1SZWyKs=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.189e20487a027271e4499cb8ae287b30e4ec57322ce20790cd6575e7ae46c682.js" integrity="sha256-GJ4gSHoCcnHkSZy4rih7MOTsVzIs4geQzWV1565GxoI=" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-50554094-4', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/logo.jpeg" alt="Logo" /><span>Yindongliang</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



<ul>
    <li><a href="/archives">Archives</a></li>
    <li><a href="/projects">Projects</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="https://github.com/tcitry" target="_blank">ğŸš€ Github</a></li>
    <li><a href="/posts/index.xml" target="_blank">ğŸ“š RSS</a></li>
</ul>
<hr>







  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ab6241a9c9348727e1ed30d9d7253a0e" class="toggle"  />
    <label for="section-ab6241a9c9348727e1ed30d9d7253a0e" class="flex justify-between">
      <a role="button" class="">Golang</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E5%91%BD%E4%BB%A4%E8%A1%8C/" class="">å‘½ä»¤è¡Œ</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E5%B7%A5%E5%85%B7%E5%8C%85/" class="">å·¥å…·åŒ…</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E6%A0%87%E5%87%86%E5%BA%93/" class="">æ ‡å‡†åº“</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" class="">ç¯å¢ƒå˜é‡</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E8%AF%AD%E6%B3%95/" class="">è¯­æ³•</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83/" class="">è¯­è¨€è§„èŒƒ</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E9%9D%A2%E8%AF%95%E9%A2%98/" class="">é¢è¯•é¢˜</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var menu=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>æµ…è°ˆ Django-REST-Framework çš„è®¾è®¡ä¸æºç </strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#apiview">APIView</a>
          <ul>
            <li><a href="#mixin">Mixin</a></li>
          </ul>
        </li>
        <li><a href="#generic-views">Generic views</a></li>
        <li><a href="#viewsets">Viewsets</a></li>
        <li><a href="#serializers">Serializers</a></li>
        <li><a href="#å…¶å®ƒ">å…¶å®ƒ</a></li>
        <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
<article class="markdown">
  <h1>
    <a href="/posts/talk-about-django-rest-framework/">æµ…è°ˆ Django-REST-Framework çš„è®¾è®¡ä¸æºç </a>
  </h1>
  
  <h5>Apr 20, 2017</h5>



  
  <div>
    
      <a href="/categories/2017/">2017</a>
  </div>
  

  
  <div>
    
      <a href="/tags/Django/">Django</a>, 
      <a href="/tags/Python/">Python</a>
  </div>
  



<p>æœ€è¿‘åˆé‡æ–°æ¥è§¦ DRFï¼Œç¿»çœ‹æ–‡æ¡£å‘ç°ï¼Œå½“æ—¶å¾ˆéš¾ç†è§£çš„ä¸œè¥¿ï¼Œå¦‚ä»Šä¸€çœ‹å°±æ‡‚äº†ï¼Œé¡ºå¸¦çœ‹äº†æºç ï¼Œä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œè‡³å°‘æ¯” Django çš„æºç ç®€å•ä¸å°‘ã€‚ä¸‹é¢å¼€å§‹ä» DRF çš„è®¾è®¡å’Œæºç ä¸¤ä¸ªæ–¹é¢ï¼Œç»“åˆè‡ªå·±çš„çœ‹æ³•ï¼Œè°ˆè°ˆDRFã€‚</p>
<h2 id="apiview">APIView</h2>
<p>APIView æ˜¯ DRF æ¦‚å¿µä½“ç³»ä¸­æœ€åŸºæœ¬ç±»è§†å›¾ï¼Œå®ƒåŸºäº Django çš„ Viewï¼ŒåŒæ—¶åˆå®ç°äº†ä¸€å±‚å¯¹è‡ªå·±åˆ›é€ çš„æ¦‚å¿µçš„å°è£…ï¼Œæ¯”å¦‚<code>permission_classes</code>ï¼Œ<code>render_classes</code>ï¼Œ<code>authentication_classes</code>ç­‰ï¼Œç›¸å½“äºè¯·æ±‚è¿‡æ¥ååˆè¿›å…¥ä¸€å±‚ï¼Œè¿‡æ»¤ï¼ˆéªŒè¯ã€åˆå§‹åŒ–ï¼‰å®Œè¦èµ°çš„è¿™äº›classesï¼Œæ‰èƒ½æ‰§è¡Œåˆ°æˆ‘ä»¬è‡ªå·±å®ç°çš„ viewã€‚</p>
<h3 id="mixin">Mixin</h3>
<p>åœ¨ä»‹ç» Generic view å‰å…ˆè¯´ä¸€ä¸‹ mixinã€‚è¯´ç™½äº†ï¼Œå®˜æ–¹ç»™çš„æ¡ˆä¾‹é‡Œé¢çš„ mixinï¼Œå°±æ˜¯å¯¹ model çš„objectå¢åˆ æ”¹æŸ¥çš„åŸå­æ“ä½œã€‚æ¯”å¦‚<code>RetrieveModelMixin</code>ï¼Œé€šè¿‡ get_object å…ˆè·å–åˆ°å¯¹è±¡ï¼Œç„¶åé€šè¿‡ serializer æ‹¿åˆ°åºåˆ—åŒ–æ•°æ®ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">RetrieveModelMixin</span>(<span style="color:#8be9fd;font-style:italic">object</span>):
    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="color:#f1fa8c">    Retrieve a model instance.
</span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">retrieve</span>(self, request, <span style="color:#ff79c6">*</span>args, <span style="color:#ff79c6">**</span>kwargs):
        instance <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>get_object()
        serializer <span style="color:#ff79c6">=</span> self<span style="color:#ff79c6">.</span>get_serializer(instance)
        <span style="color:#ff79c6">return</span> Response(serializer<span style="color:#ff79c6">.</span>data)
</code></pre></div><p>å»¶ä¼¸å¼€æ¥ï¼ŒMixin æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå› ä¸ºå®ƒæ˜¯æ¨¡å—åŒ–æ‹†åˆ†åæœ€å…³é”®çš„åŸå­é€»è¾‘å®ç°ï¼Œæ˜¯æ¯ä¸€ä¸ªå•ç‹¬çš„å—ã€‚è¯•æƒ³ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›å°å—æ‹¼æ¥æˆä¸åŒçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ï¼Œä½¿ç”¨è€…æœ‰å¯èƒ½åœ¨æ‰‹æœºæ³¨å†Œï¼Œæœ‰å¯èƒ½åœ¨webæ³¨å†Œï¼Œåœ¨ Django åç«¯ä¸­å¯èƒ½éœ€è¦æä¾›ä¸¤å¥— view å±‚æ¥å£ï¼Œç”šè‡³è¿˜æœ‰æ¸²æŸ“ template çš„å®ç°ï¼Œä½†æ˜¯çœŸæ­£çš„é€»è¾‘å¤„ç†ä¸Šï¼Œå¯ä»¥åªè°ƒç”¨ä¸€ä¸ª<code>RegistMixin</code>çš„ä¸œè¥¿ï¼Œä»è€Œæé«˜ä»£ç å¤ç”¨ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>ç”šè‡³ï¼ŒMixin å¯ä»¥é‡å†™åŒæ—¶ç»§æ‰¿çš„ GenericAPIView ä¸­çš„å®ç°ï¼Œæ¯”å¦‚ request å‚æ•°å¤„ç†ï¼ŒResponse æ•°æ®å¤„ç†ï¼ˆè§†é¢‘ã€æ–‡ä»¶æ ¼å¼ä¹‹ç±»ï¼‰ï¼Œget_querysetï¼Œget_serializer ç­‰ç­‰æœ‰é€šç”¨éœ€æ±‚ï¼Œå¹¶ä¸”ä¼šåœ¨å¤šä¸ªåœ°æ–¹å¤ç”¨çš„å®šåˆ¶ï¼Œæ¯”å¦‚æ ¹æ®ä¼ å…¥å‚æ•°æŒ‡å®šéœ€è¦çš„ serializer ä»è€Œåœ¨ mixin ä¸­é‡å†™ get_serializer æ–¹æ³•çš„å®ç°é€»è¾‘ã€‚æ€»ä¹‹ï¼ŒåŸæœ¬ä¼šåœ¨ View ä¸­å‘ç”Ÿçš„ä¸€åˆ‡ï¼Œéƒ½å¯ä»¥é€šè¿‡ Mixin å°è£…èµ·æ¥ï¼Œæˆ–é‡å†™ã€æˆ–æ–°çš„é€»è¾‘å®ç°ã€‚</p>
<h2 id="generic-views">Generic views</h2>
<p>å…¸å‹çš„Generic viewå°±æ˜¯è¿™æ ·çš„ï¼Œæœ¬è´¨ä¸Šæ˜¯ç±»è§†å›¾ï¼Œå®ƒç”±ä¸€äº› Mixin ç»„æˆï¼Œè¿™é‡Œçš„<code>ListModelMixin</code>å®ç°äº†list()æ–¹æ³•ï¼Œå¹¶åŒæ—¶ç»§æ‰¿è‡ª<code>GenericAPIView</code>ï¼ŒåŒæ—¶è‡ªå·±å®ç°äº†ç”± get() åˆ° list() çš„è½¬å‘ã€‚å¤æ‚çš„æ˜¯ï¼Œ<code>GenericAPIView</code> å®ç°ï¼Œä»¥åŠä»–çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå’ŒåæœŸå¯¹é‡Œé¢å‡½æ•°çš„é‡å†™ã€å®šåˆ¶ã€‚æ‰€ä»¥æŠ½æ—¶é—´å¤šç ”ç©¶ä¸‹è¿™é‡Œå¾ˆå€¼å¾—ï¼Œä»¥åä¹Ÿä¼šèŠ‚çœå¤§é‡æ—¶é—´ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">ListAPIView</span>(mixins<span style="color:#ff79c6">.</span>ListModelMixin,
                  GenericAPIView):
    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="color:#f1fa8c">    Concrete view for listing a queryset.
</span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">get</span>(self, request, <span style="color:#ff79c6">*</span>args, <span style="color:#ff79c6">**</span>kwargs):
        <span style="color:#ff79c6">return</span> self<span style="color:#ff79c6">.</span>list(request, <span style="color:#ff79c6">*</span>args, <span style="color:#ff79c6">**</span>kwargs)
</code></pre></div><p>å¦‚æœè¦å®ç°çš„é€»è¾‘ä¸æ˜¯å¾ˆå¤æ‚çš„è¯ï¼Œç›´æ¥åœ¨viewä¸­ç»§æ‰¿ä¸€ä¸ª<code>[List[Create[Update]]]APIView</code>ï¼Œç„¶åæŒ‡å®šä¸‹<code>serializer_class</code>ï¼Œ<code>permission_class</code>ï¼Œ<code>queryset</code>ç­‰å°±å¯ä»¥äº†ã€‚å¯¹DRFç†Ÿæ‚‰çš„è¯ç›¸ä¿¡è¿™ç§æ–¹å¼å®ç°åŠŸèƒ½ä¼šå¾ˆå¿«ã€‚</p>
<h2 id="viewsets">Viewsets</h2>
<p>å…ˆçœ‹ä»£ç ï¼ŒViewSet ç»§æ‰¿äº†<code>ViewSetMixin</code>å’Œ<code>APIView</code>ï¼Œ<code>ViewSetMix</code>æ˜¯<code>APIView</code>ä¸­<code>as_view</code>çš„é‡å†™ï¼Œå®ç°è¯·æ±‚åˆ° action çš„è½¬å‘ï¼Œè™½ç„¶ Django è‡ªå¸¦çš„ View ä¹Ÿå®ç°äº† as_viewï¼Œä½†åªæ˜¯ä¼ é€’åˆå§‹åŒ–å‚æ•°ï¼Œç¡®å®æ²¡æœ‰è¿™ä¸ªè¯·æ±‚è½¬å‘åˆ° action çš„å®ç°ï¼ŒAPIViewé‡Œé¢ä¹Ÿæ²¡æœ‰ã€‚è¿™é‡Œä¹Ÿå¯ä»¥å­¦ä¹ åˆ°ï¼šPythonçš„å¤šé‡ç»§æ‰¿ä¸­ï¼Œå­ç±»å½¢å‚çš„å…ˆåé¡ºåºï¼Œå½±å“åˆ°æ‰§è¡Œçš„æ˜¯å“ªä¸ªç±»ä¸­çš„<code>as_view</code>æ–¹æ³•ï¼Œç›¸å½“äº<code>ViewSetMixin</code>åˆç»§æ‰¿äº†<code>APIView</code>ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">ViewSet</span>(ViewSetMixin, views<span style="color:#ff79c6">.</span>APIView):
    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="color:#f1fa8c">    The base ViewSet class does not provide any actions by default.
</span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
    <span style="color:#ff79c6">pass</span>
</code></pre></div><p>viewsets å’Œ APIView ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼Œå®ƒè¦è¡¨è¾¾çš„æ›´å¤šçš„æ˜¯ä¸€ä¸ªæ–¹æ³•è§†å›¾çš„é›†åˆï¼Œä»–çš„å†…éƒ¨æ˜¯å·²ç»å®ç°äº†çš„<code>list()</code>ï¼Œ<code>retrieve()</code>ï¼Œ<code>delete()</code>ï¼Œ<code>update()</code>çš„å®ç°ï¼Œå¦‚æœå®ç°ç”¨ DRF çš„ DefaultRouterã€‚routerå’Œas_viewéƒ½å¯ä»¥å®ç°GETè¯·æ±‚&ndash;&gt;list()çš„è½¬å‘ï¼Œå€¼å¾—ä¸€æçš„è¿˜æœ‰<code>detail_route</code>å’Œ<code>list_route</code>(æœ€æ–°ç‰ˆæœ¬æ¨èä½¿ç”¨<code>action</code>)ï¼Œä»–ä»¬éœ€è¦åœ¨urlsä¸­é…ç½® router çš„å‰æä¸‹ä½¿ç”¨ï¼Œåœ¨ Router ç±»çš„<code>get_url</code>é‡Œé¢çš„<code>get_routers</code>æ‰§è¡Œï¼Œç„¶åè·å¾—æ‰€æœ‰çš„è·¯ç”±åˆ—è¡¨ï¼Œå†è¿›è¡Œ action è½¬å‘ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#6272a4"># account/views.py</span>
<span style="color:#ff79c6">class</span> <span style="color:#50fa7b">AccountViewSet</span>(viewsets<span style="color:#ff79c6">.</span>ModelViewSet):
    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="color:#f1fa8c">    å¯¹Accountçš„æ“ä½œçš„é›†åˆï¼Œæœ¬è´¨ä¸Šæ˜¯åŸºäºæ–¹æ³•è§†å›¾çš„å°è£…
</span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
    queryset <span style="color:#ff79c6">=</span> User<span style="color:#ff79c6">.</span>objects<span style="color:#ff79c6">.</span>all()
    serializer_class <span style="color:#ff79c6">=</span> UserSerializer

    @detail_route(methods<span style="color:#ff79c6">=</span>[<span style="color:#f1fa8c">&#39;post&#39;</span>], url_path<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;change-password&#39;</span>)
    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">set_password</span>(self, request, <span style="color:#ff79c6">*</span>args, <span style="color:#ff79c6">**</span>kwargs):
        <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="color:#f1fa8c">        ä¿®æ”¹ç”¨æˆ·çš„å¯†ç 
</span><span style="color:#f1fa8c">        &#34;&#34;&#34;</span>
        <span style="color:#ff79c6">return</span> Response(status<span style="color:#ff79c6">=</span>status<span style="color:#ff79c6">.</span>HTTP_200_OK)

    @detail_route(methods<span style="color:#ff79c6">=</span>[<span style="color:#f1fa8c">&#39;post&#39;</span>], url_path<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;change-username&#39;</span>)
    <span style="color:#ff79c6">def</span> <span style="color:#50fa7b">change_username</span>(self, request, <span style="color:#ff79c6">*</span>args, <span style="color:#ff79c6">**</span>kwargs):
        <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="color:#f1fa8c">        ä¿®æ”¹ç”¨æˆ·çš„ç”¨æˆ·å
</span><span style="color:#f1fa8c">        &#34;&#34;&#34;</span>
        <span style="color:#ff79c6">return</span> Response(status<span style="color:#ff79c6">=</span>status<span style="color:#ff79c6">.</span>HTTP_200_OK, data<span style="color:#ff79c6">=</span>{<span style="color:#f1fa8c">&#39;msg&#39;</span>: <span style="color:#f1fa8c">&#39;changed&#39;</span>})

<span style="color:#6272a4"># account/urls.py</span>
router <span style="color:#ff79c6">=</span> routers<span style="color:#ff79c6">.</span>SimpleRouter()
router<span style="color:#ff79c6">.</span>register(<span style="color:#f1fa8c">r</span><span style="color:#f1fa8c">&#39;&#39;</span>, views<span style="color:#ff79c6">.</span>AccountViewSet, base_name<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#39;user&#39;</span>)
urlpatterns <span style="color:#ff79c6">=</span> router<span style="color:#ff79c6">.</span>urls
</code></pre></div><p><img src="https://raw.githubusercontent.com/tcitry/Pictures/master/uPic/1574349880486.png" alt="" /></p>
<p>ä»¥ä¸Šä»£ç ï¼Œç›´æ¥å®ç°äº†å¯¹ account çš„å¢ï¼ˆcreateï¼‰åˆ ï¼ˆdeleteï¼‰æ”¹ï¼ˆupdateï¼‰å’Œ account åˆ—è¡¨ï¼ˆlistï¼‰ï¼ŒåŒæ—¶æˆ‘åˆæ·»åŠ äº†<code>set_password</code>å’Œ<code>change_username</code>æ–¹æ³•ã€‚è¿™ç§å½¢å¼æ²¡æ¥è§¦è¿‡çš„è¯å¾ˆéš¾ç†è§£ï¼Œä½†æ˜¯å´å¾ˆå®ç”¨ï¼Œå°¤å…¶ä¸€ä¸ª model æœ‰é¢‘ç¹çš„ä¸åŒåŠŸèƒ½éœ€æ±‚çš„æ—¶å€™ï¼Œå¦‚æœå†™<code>SetPasswordView</code>å’Œ<code>ChangeUsernameView</code>è¿™æ ·ç±»è§†å›¾çš„å®ç°ï¼Œæœªå…ä¼šå¾ˆéº»çƒ¦ï¼Œè¿™ä¸ªæ—¶å€™ viewsets å°±æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚</p>
<h2 id="serializers">Serializers</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">TopicListSerializer</span>(serializers<span style="color:#ff79c6">.</span>ModelSerializer):
    <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">Meta</span>:
        model <span style="color:#ff79c6">=</span> models<span style="color:#ff79c6">.</span>TopicModel
        fields <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;__all__&#39;</span>
        read_only_fields <span style="color:#ff79c6">=</span> (<span style="color:#f1fa8c">&#39;id&#39;</span>, <span style="color:#f1fa8c">&#39;author_id&#39;</span>)
</code></pre></div><p>Serializer ç›¸å½“äº View å’Œ Model çš„ä¸­é—´å±‚ï¼Œé¿å… view é¢‘ç¹ç›´æ¥æ“ä½œ model object çš„åŒæ—¶ï¼Œè§„èŒƒæ•°æ®å­—æ®µæ ¼å¼ã€å†…å®¹ã€validatorã€æä¾›åºåˆ—åŒ–æ•°æ®ç­‰ç­‰ï¼ŒåŒæ—¶å¯ä»¥å®šä¹‰æ–¹æ³•å®ç°å¯¹ model çš„ç‰¹å®šæ“ä½œã€‚serializer ä¸é€‚åˆå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå®ƒè¦åšçš„å°±æ˜¯å¯¹æ•°æ®ä¼ å…¥ä¼ å‡ºçš„å¤„ç†ï¼Œä¿è¯æ•°æ®æ­£ç¡®ã€‚é€šå¸¸ä¸ºäº†éªŒè¯å’Œåºåˆ—åŒ–å„é¡¹æ•°æ®ï¼Œserializer çš„ä»£ç åŠ ä¸Š validator ä¹Ÿé›†ä¸­äº†è¾ƒå¤§çš„å·¥ä½œé‡ã€‚</p>
<h2 id="å…¶å®ƒ">å…¶å®ƒ</h2>
<p>DRF æœ€ä¸»è¦çš„å°±æ˜¯ä¸Šé¢æåˆ°çš„ä¸€äº›æ¦‚å¿µï¼Œä¹Ÿè®¸åœ¨åˆšæ¥è§¦ Django Web çš„è¯æ²¡æœ‰æ¥è§¦è¿‡ï¼Œä½†æ˜¯è¿™åº”è¯¥æ˜¯ DRF ä¸­æœ€å¸¸ç”¨çš„ã€‚å…¶ä»–çš„æ¯”å¦‚ routerã€Throttlingã€validator ä¹Ÿæ¯”è¾ƒå®ç”¨ï¼Œç”šè‡³ä¹Ÿæ˜¯å¿…é¡»æŒæ¡çš„ï¼Œä½†æ˜¯ DRF çš„æ–‡æ¡£å†™çš„ç¡®å®šå¾ˆè¯¦ç»†ï¼Œä½¿ç”¨æ–¹æ³•ä¸å†ä»‹ç»ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>æˆ‘çš„ç†è§£ï¼ŒDRF æ˜¯åŸºäº â€œDon&rsquo;t repeat yourselfâ€ åŸåˆ™ï¼Œæå‡ºä¸€ä¸ªWebå¼€å‘çš„è§„èŒƒï¼Œå®ƒä»£ç é‡Œæä¾›äº†è§„èŒƒçš„æ¥å£ï¼Œå’Œæœ€åŸºç¡€çš„ä½¿ç”¨ä¾‹å­ï¼Œè€Œåœ¨å®é™…çš„å¤æ‚é€»è¾‘å¼€å‘ä¸­ï¼Œéœ€è¦çš„æ˜¯å¯¹å„ç§æ¦‚å¿µçš„ â€œcustomeâ€ å®šåˆ¶ï¼Œå‡ ä¹æ–‡æ¡£æ¯ä¸€é¡µéƒ½æä¾›äº†å®šåˆ¶çš„ä»‹ç»ã€‚å®é™…çš„åº”ç”¨é‡Œé¢ä¸ä¼šæ˜¯ç®€å•çš„å¢åˆ æ”¹æŸ¥ï¼Œè€Œæ˜¯éœ€è¦èµ°ä¸€å®šçš„é€»è¾‘å¤„ç†åçš„å¢åˆ æ”¹æŸ¥ï¼ŒåŒæ—¶è¿˜æœ‰å¯¹åŸºç¡€æ“ä½œé¢‘ç¹çš„å¤ç”¨ã€‚DRFé€šè¿‡æŠŠwebä¸šåŠ¡ç³»ç»Ÿä¸­ä¼šå‡ºç°çš„æ¯ä¸€æ­¥æµç¨‹æ‹†åˆ†ï¼Œè¿›è¡Œæ¨¡å—åŒ–ï¼Œæ¦‚å¿µåŒ–ï¼Œè®©å¼€å‘è€…çŸ¥é“éœ€è¦å¼€å‘çš„ä¸šåŠ¡å±äºå“ªä¸€ç§æ¦‚å¿µï¼Œæ”¾åˆ°å“ªä¸€ä¸ªæ¨¡å—ä¸‹é¢ï¼Œä»è€Œåœ¨DRFçš„å¤§æ¡†æ¶ä¸‹ç‰¹å®šçš„ä½ç½®ç¼–å†™ï¼Œè¿™æ ·å‡å°‘äº†ä¸€ä»½åŠŸèƒ½å¤šä»½ä»£ç å®ç°çš„éº»çƒ¦ï¼Œä¹Ÿå› ä¸ºè§„èŒƒåŒ– coding æé«˜äº†å¼€å‘è€…çš„æ•ˆç‡ã€‚</p>
<p>å½“ç„¶DRFä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå®ƒå¯¹æ–°æ‰‹ä¸å¤Ÿå‹å¥½ï¼Œä¸€äº›å°è£…å¤ªæè‡´ï¼Œä»¥è‡³äºä¸å®¹æ˜“æ˜ç™½ç¨‹åºçš„æ‰§è¡Œæµç¨‹ï¼Œæ¯”å¦‚æˆ‘åˆæ¬¡çœ‹<code>viewsets</code>ã€<code>GenericAPIView</code>çš„æ—¶å€™ã€‚</p>
<p>æœ€åæˆ‘åŸºäºDRFçš„æ–‡æ¡£ï¼Œå­¦ä¹ è¿‡ç¨‹ä¸­å†™äº†ä¸€ä¸ªè®ºå›demoï¼š<a href="https://github.com/tcitry/DRForum">DRForum</a>çš„è®ºå›ä¾‹å­ï¼Œå¯ä»¥ç›´æ¥runserverè°ƒè¯•ã€‚é€šè¿‡<code>127.0.0.1:8000/docs</code>å¯ä»¥æŸ¥çœ‹æ±‡æ€»çš„æ¥å£ï¼Œè¿™é‡Œä½¿ç”¨äº†<a href="http://DRFdocs.com/">DRF Docs</a>ã€‚</p>
</article>
 
      <div>
    <span style="float:left">
    
        ä¸Šä¸€ç¯‡ï¼š<a href="https://yindongliang.com/posts/use-typora-write-hugo-blog/">ä½¿ç”¨ typora æ¥ç¼–è¾‘ä½ çš„ hugo åšå®¢</a>
    
    </span>
    <span style="float:right">
    
        ä¸‹ä¸€ç¯‡ï¼š<a href="https://yindongliang.com/posts/ubuntu-MariaDB/">Vagrant è™šæ‹Ÿæœº Ubuntu16.04 å®‰è£… MariaDB</a>
    
    </span>
</div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH" crossorigin="anonymous"></script>


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js" integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
              delimiters: [
                  {left: "$$", right: "$$", display: true},
                  {left: "$", right: "$", display: false},
                  {left: "\\(", right: "\\)", display: false},
                  {left: "\\[", right: "\\]", display: true}
              ]
          });
    });
</script>


      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function select(element){const selection=window.getSelection();const range=document.createRange();range.selectNodeContents(element);selection.removeAllRanges();selection.addRange(range);}
document.querySelectorAll("pre code").forEach(code=>{code.addEventListener("click",function(event){select(code.parentElement);if(navigator.clipboard){navigator.clipboard.writeText(code.parentElement.textContent);}});});})();</script>


 
        
      </footer>

      
  
  <div class="book-comments">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yindongliang" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#apiview">APIView</a>
          <ul>
            <li><a href="#mixin">Mixin</a></li>
          </ul>
        </li>
        <li><a href="#generic-views">Generic views</a></li>
        <li><a href="#viewsets">Viewsets</a></li>
        <li><a href="#serializers">Serializers</a></li>
        <li><a href="#å…¶å®ƒ">å…¶å®ƒ</a></li>
        <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












