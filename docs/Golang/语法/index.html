<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="æ•°æ®ç±»å‹ ç±»å‹è½¬æ¢ æ•°æ®ç»“æ„ ç¨‹åºæ§åˆ¶ for/break/continue for å¾ªç¯ go ä¸­å¯¹å­—ç¬¦ä¸² for å¾ªç¯å¾—åˆ°çš„æ˜¯ç´¢å¼•å’Œ int32 ç±»å‹çš„æ•°å­— è¿›åˆ¶ åå…­è¿›åˆ¶ 0x å¼€å¤´ä¸ºåå…­è¿›åˆ¶ å…«è¿›åˆ¶ 0 å¼€å¤´ä¸ºå…«è¿›åˆ¶ switch/case/default fallthrough select/case/default â€œ">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="æ•°æ®ç±»å‹ ç±»å‹è½¬æ¢ æ•°æ®ç»“æ„ ç¨‹åºæ§åˆ¶ for/break/continue for å¾ªç¯ go ä¸­å¯¹å­—ç¬¦ä¸² for å¾ªç¯å¾—åˆ°çš„æ˜¯ç´¢å¼•å’Œ int32 ç±»å‹çš„æ•°å­— è¿›åˆ¶ åå…­è¿›åˆ¶ 0x å¼€å¤´ä¸ºåå…­è¿›åˆ¶ å…«è¿›åˆ¶ 0 å¼€å¤´ä¸ºå…«è¿›åˆ¶ switch/case/default fallthrough select/case/default â€œ" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yindongliang.com/docs/Golang/%E8%AF%AD%E6%B3%95/" />

<title>è¯­æ³• | Yindongliang</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.d92e572ecaecb8ab81df83c495fc50c9330006fab2d0600e9c3ab1d52656c8ab.css" integrity="sha256-2S5XLsrsuKuB34PElfxQyTMABvqy0GAOnDqx1SZWyKs=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.189e20487a027271e4499cb8ae287b30e4ec57322ce20790cd6575e7ae46c682.js" integrity="sha256-GJ4gSHoCcnHkSZy4rih7MOTsVzIs4geQzWV1565GxoI=" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-50554094-4', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/logo.jpeg" alt="Logo" /><span>Yindongliang</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



<ul>
    <li><a href="/archives">Archives</a></li>
    <li><a href="/projects">Projects</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="https://github.com/tcitry" target="_blank">ğŸš€ Github</a></li>
    <li><a href="/posts/index.xml" target="_blank">ğŸ“š RSS</a></li>
</ul>
<hr>







  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ab6241a9c9348727e1ed30d9d7253a0e" class="toggle" checked />
    <label for="section-ab6241a9c9348727e1ed30d9d7253a0e" class="flex justify-between">
      <a role="button" class="">Golang</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E5%91%BD%E4%BB%A4%E8%A1%8C/" class="">å‘½ä»¤è¡Œ</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E5%B7%A5%E5%85%B7%E5%8C%85/" class="">å·¥å…·åŒ…</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E6%A0%87%E5%87%86%E5%BA%93/" class="">æ ‡å‡†åº“</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" class="">ç¯å¢ƒå˜é‡</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E8%AF%AD%E6%B3%95/" class=" active">è¯­æ³•</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E8%AF%AD%E8%A8%80%E8%A7%84%E8%8C%83/" class="">è¯­è¨€è§„èŒƒ</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://yindongliang.com/docs/Golang/%E9%9D%A2%E8%AF%95%E9%A2%98/" class="">é¢è¯•é¢˜</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var menu=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>è¯­æ³•</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#for-å¾ªç¯">for å¾ªç¯</a></li>
        <li><a href="#è¿›åˆ¶">è¿›åˆ¶</a>
          <ul>
            <li><a href="#åå…­è¿›åˆ¶">åå…­è¿›åˆ¶</a></li>
            <li><a href="#å…«è¿›åˆ¶">å…«è¿›åˆ¶</a></li>
          </ul>
        </li>
        <li><a href="#å•å¼•å·">å•å¼•å·</a></li>
        <li><a href="#ä¼ å€¼å’Œä¼ å¼•ç”¨">ä¼ å€¼å’Œä¼ å¼•ç”¨</a></li>
        <li><a href="#select">select</a></li>
        <li><a href="#itoa">itoa</a></li>
        <li><a href="#slice-åˆ‡ç‰‡å’Œæ•°ç»„">slice åˆ‡ç‰‡å’Œæ•°ç»„</a></li>
        <li><a href="#defer">defer</a></li>
        <li><a href="#panic">panic</a></li>
        <li><a href="#recover">recover</a></li>
        <li><a href="#internal-package">internal package</a></li>
        <li><a href="#type-assertions">Type assertions</a></li>
        <li><a href="#channel">channel</a>
          <ul>
            <li><a href="#å¸¦ç¼“å†²åŒºå’Œä¸å¸¦ç¼“å†²åŒºçš„åŒº">å¸¦ç¼“å†²åŒºå’Œä¸å¸¦ç¼“å†²åŒºçš„åŒº</a></li>
          </ul>
        </li>
        <li><a href="#ç‰¹æ®Šæ³¨é‡Š">ç‰¹æ®Šæ³¨é‡Š</a>
          <ul>
            <li><a href="#golinkname">go:linkname</a></li>
            <li><a href="#gonoescape">go:noescape</a></li>
          </ul>
        </li>
        <li><a href="#named-return-value">named return value</a></li>
        <li><a href="#æ•°å­¦è®¡ç®—">æ•°å­¦è®¡ç®—</a></li>
        <li><a href="#ä½ç§»è®¡ç®—">ä½ç§»è®¡ç®—</a></li>
        <li><a href="#cgo">CGo</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><p>æ•°æ®ç±»å‹</p>
<p>ç±»å‹è½¬æ¢</p>
<p>æ•°æ®ç»“æ„</p>
<p>ç¨‹åºæ§åˆ¶</p>
<p>for/break/continue</p>
<h2 id="for-å¾ªç¯">for å¾ªç¯</h2>
<p>go ä¸­å¯¹å­—ç¬¦ä¸² for å¾ªç¯å¾—åˆ°çš„æ˜¯ç´¢å¼•å’Œ int32 ç±»å‹çš„æ•°å­—</p>
<h2 id="è¿›åˆ¶">è¿›åˆ¶</h2>
<h3 id="åå…­è¿›åˆ¶">åå…­è¿›åˆ¶</h3>
<p>0x å¼€å¤´ä¸ºåå…­è¿›åˆ¶</p>
<h3 id="å…«è¿›åˆ¶">å…«è¿›åˆ¶</h3>
<p>0 å¼€å¤´ä¸ºå…«è¿›åˆ¶</p>
<p>switch/case/default</p>
<p>fallthrough</p>
<p>select/case/default</p>
<p>â€œé¢å‘å¯¹è±¡â€</p>
<p>è¿›é˜¶è¯­æ³•</p>
<p>goto</p>
<h2 id="å•å¼•å·">å•å¼•å·</h2>
<p>å•å¼•å·åœ¨ Golang è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šç±»å‹ rune è¡¨ç¤ºå­—ç¬¦å‹ã€‚rune ä¸º int32 çš„åˆ«åï¼Œå®ƒå®Œå…¨ç­‰ä»·äº int32ï¼Œä¹ æƒ¯ä¸Šç”¨å®ƒæ¥åŒºåˆ«å­—ç¬¦å€¼å’Œæ•´æ•°å€¼ã€‚rune è¡¨ç¤ºå­—ç¬¦çš„ Unicode ç å€¼ã€‚</p>
<h2 id="ä¼ å€¼å’Œä¼ å¼•ç”¨">ä¼ å€¼å’Œä¼ å¼•ç”¨</h2>
<p>å€¼ç±»å‹ï¼šintã€floatã€boolã€arrayã€sturctç­‰</p>
<p>å¼•ç”¨ç±»å‹ï¼šsliceï¼Œmapï¼Œchannelï¼Œinterfaceï¼Œfuncï¼Œstringç­‰</p>
<p>ä¼ å‚ç»™å‡½æ•°æ—¶ï¼Œå¤–éƒ¨çš„å€¼ç±»å‹æ— æ³•è¢«ä¿®æ”¹ï¼Œå¼•ç”¨ç±»å‹ä¼šè¢«ä¿®æ”¹ã€‚</p>
<h2 id="select">select</h2>
<ol>
<li>é™¤ default å¤–ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ª case è¯­å¥è¯„ä¼°é€šè¿‡ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¿™ä¸ªcaseé‡Œçš„è¯­å¥ï¼›</li>
<li>é™¤ default å¤–ï¼Œå¦‚æœæœ‰å¤šä¸ª case è¯­å¥è¯„ä¼°é€šè¿‡ï¼Œé‚£ä¹ˆé€šè¿‡ä¼ªéšæœºçš„æ–¹å¼éšæœºé€‰ä¸€ä¸ªï¼›</li>
<li>å¦‚æœ default å¤–çš„ case è¯­å¥éƒ½æ²¡æœ‰é€šè¿‡è¯„ä¼°ï¼Œé‚£ä¹ˆæ‰§è¡Œ default é‡Œçš„è¯­å¥ï¼›</li>
<li>å¦‚æœæ²¡æœ‰ defaultï¼Œé‚£ä¹ˆä»£ç å—ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€ä¸ª case é€šè¿‡è¯„ä¼°ï¼›å¦åˆ™ä¸€ç›´é˜»å¡</li>
</ol>
<h2 id="itoa">itoa</h2>
<p>å‚è€ƒ <a href="https://studygolang.com/articles/22498">https://studygolang.com/articles/22498</a></p>
<h2 id="slice-åˆ‡ç‰‡å’Œæ•°ç»„">slice åˆ‡ç‰‡å’Œæ•°ç»„</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6272a4">// åˆ›å»ºæ•°ç»„
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> arr <span style="color:#ff79c6">:=</span> []<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>,<span style="color:#bd93f9">3</span>}

<span style="color:#6272a4">// åŠ¨æ€æ•°ç»„åˆ›å»ºï¼Œç±»ä¼¼åˆ›å»ºæ•°ç»„ï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®šå›ºå®šé•¿åº¦
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">var</span> al []<span style="color:#8be9fd">int</span>     <span style="color:#6272a4">//åˆ›å»ºslice
</span><span style="color:#6272a4"></span>sl <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>([]<span style="color:#8be9fd">int</span>,<span style="color:#bd93f9">10</span>)  <span style="color:#6272a4">//åˆ›å»ºæœ‰10ä¸ªå…ƒç´ çš„slice
</span><span style="color:#6272a4"></span>sl<span style="color:#ff79c6">:=</span>[]<span style="color:#8be9fd">int</span>{<span style="color:#bd93f9">1</span>,<span style="color:#bd93f9">2</span>,<span style="color:#bd93f9">3</span>} <span style="color:#6272a4">//åˆ›å»ºæœ‰åˆå§‹åŒ–å…ƒç´ çš„slice
</span></code></pre></div><p>åŒºåˆ«ï¼š</p>
<ul>
<li>å£°æ˜æ•°ç»„æ—¶ï¼Œæ–¹æ‹¬å·å†…å†™æ˜äº†æ•°ç»„çš„é•¿åº¦æˆ–è€…&hellip;,å£°æ˜sliceæ—¶å€™ï¼Œæ–¹æ‹¬å·å†…ä¸ºç©º</li>
<li>ä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œæ•°ç»„ä¼ é€’çš„æ˜¯æ•°ç»„çš„å‰¯æœ¬ï¼Œè€Œsliceä¼ é€’çš„æ˜¯æŒ‡é’ˆã€‚</li>
</ul>
<h2 id="defer">defer</h2>
<p>defer çš„è¯­å¥åœ¨ return ä¹‹åæ‰§è¡Œ</p>
<ol>
<li>å¤šä¸ªdeferçš„æ‰§è¡Œé¡ºåºä¸ºâ€œåè¿›å…ˆå‡ºâ€ï¼›</li>
<li>æ‰€æœ‰å‡½æ•°åœ¨æ‰§è¡ŒRETè¿”å›æŒ‡ä»¤ä¹‹å‰ï¼Œéƒ½ä¼šå…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨deferè¯­å¥ï¼Œè‹¥å­˜åœ¨åˆ™å…ˆé€†åºè°ƒç”¨deferè¯­å¥è¿›è¡Œæ”¶å°¾å·¥ä½œå†é€€å‡ºè¿”å›ï¼›</li>
<li>åŒ¿åè¿”å›å€¼æ˜¯åœ¨returnæ‰§è¡Œæ—¶è¢«å£°æ˜ï¼Œæœ‰åè¿”å›å€¼åˆ™æ˜¯åœ¨å‡½æ•°å£°æ˜çš„åŒæ—¶è¢«å£°æ˜ï¼Œå› æ­¤åœ¨deferè¯­å¥ä¸­åªèƒ½è®¿é—®æœ‰åè¿”å›å€¼ï¼Œè€Œä¸èƒ½ç›´æ¥è®¿é—®åŒ¿åè¿”å›å€¼ï¼›</li>
<li>returnå…¶å®åº”è¯¥åŒ…å«å‰åä¸¤ä¸ªæ­¥éª¤ï¼šç¬¬ä¸€æ­¥æ˜¯ç»™è¿”å›å€¼èµ‹å€¼ï¼ˆè‹¥ä¸ºæœ‰åè¿”å›å€¼åˆ™ç›´æ¥èµ‹å€¼ï¼Œè‹¥ä¸ºåŒ¿åè¿”å›å€¼åˆ™å…ˆå£°æ˜å†èµ‹å€¼ï¼‰ï¼›ç¬¬äºŒæ­¥æ˜¯è°ƒç”¨RETè¿”å›æŒ‡ä»¤å¹¶ä¼ å…¥è¿”å›å€¼ï¼Œè€ŒRETåˆ™ä¼šæ£€æŸ¥deferæ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨å°±å…ˆé€†åºæ’æ’­deferè¯­å¥ï¼Œæœ€åRETæºå¸¦è¿”å›å€¼é€€å‡ºå‡½æ•°ï¼›</li>
</ol>
<p>â€â€å› æ­¤ deferã€returnã€è¿”å›å€¼ä¸‰è€…çš„æ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯ï¼šreturnæœ€å…ˆç»™è¿”å›å€¼èµ‹å€¼ï¼›æ¥ç€deferå¼€å§‹æ‰§è¡Œä¸€äº›æ”¶å°¾å·¥ä½œï¼›æœ€åRETæŒ‡ä»¤æºå¸¦è¿”å›å€¼é€€å‡ºå‡½æ•°ã€‚</p>
<ul>
<li>åè°ƒç”¨çš„ defer å‡½æ•°ä¼šå…ˆæ‰§è¡Œï¼š
<ul>
<li>åè°ƒç”¨çš„ <code>defer</code> å‡½æ•°ä¼šè¢«è¿½åŠ åˆ° Goroutine <code>_defer</code> é“¾è¡¨çš„æœ€å‰é¢ï¼›</li>
<li>è¿è¡Œ <a href="https://draveness.me/golang/tree/runtime._defer"><code>runtime._defer</code></a> æ—¶æ˜¯ä»å‰åˆ°åä¾æ¬¡æ‰§è¡Œï¼›</li>
</ul>
</li>
<li>å‡½æ•°çš„å‚æ•°ä¼šè¢«é¢„å…ˆè®¡ç®—ï¼›
<ul>
<li>è°ƒç”¨ <a href="https://draveness.me/golang/tree/runtime.deferproc"><code>runtime.deferproc</code></a> å‡½æ•°åˆ›å»ºæ–°çš„å»¶è¿Ÿè°ƒç”¨æ—¶å°±ä¼šç«‹åˆ»æ‹·è´å‡½æ•°çš„å‚æ•°ï¼Œå‡½æ•°çš„å‚æ•°ä¸ä¼šç­‰åˆ°çœŸæ­£æ‰§è¡Œæ—¶è®¡ç®—ï¼›</li>
</ul>
</li>
</ul>
<h2 id="panic">panic</h2>
<p><code>panic</code> èƒ½å¤Ÿæ”¹å˜ç¨‹åºçš„æ§åˆ¶æµï¼Œè°ƒç”¨ <code>panic</code> åä¼šç«‹åˆ»åœæ­¢æ‰§è¡Œå½“å‰å‡½æ•°çš„å‰©ä½™ä»£ç ï¼Œå¹¶åœ¨å½“å‰ Goroutine ä¸­é€’å½’æ‰§è¡Œè°ƒç”¨æ–¹çš„ <code>defer</code>ï¼›</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">test</span>() {
	<span style="color:#ff79c6">defer</span> fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;in main&#34;</span>)
	<span style="color:#ff79c6">defer</span> <span style="color:#8be9fd;font-style:italic">func</span>() {
		<span style="color:#ff79c6">defer</span> fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;in defer func&#34;</span>)
		<span style="color:#ff79c6">defer</span> <span style="color:#8be9fd;font-style:italic">func</span>() {
			<span style="color:#8be9fd;font-style:italic">panic</span>(<span style="color:#f1fa8c">&#34;panic again and again&#34;</span>)
		}()
		<span style="color:#8be9fd;font-style:italic">panic</span>(<span style="color:#f1fa8c">&#34;panic again&#34;</span>)
	}()

	<span style="color:#8be9fd;font-style:italic">panic</span>(<span style="color:#f1fa8c">&#34;panic once&#34;</span>)
}

âœ <span style="color:#ff79c6">go</span> run main.<span style="color:#ff79c6">go</span> test
in <span style="color:#ff79c6">defer</span> <span style="color:#8be9fd;font-style:italic">func</span>
in main
panic: panic once
        panic: panic again
        panic: panic again and again

</code></pre></div><p>defer æ˜¯åè¿›å…ˆå‡ºã€‚panic éœ€è¦ç­‰defer ç»“æŸåæ‰ä¼šå‘ä¸Šä¼ é€’ã€‚å‡ºç° panic æ—¶å€™ï¼Œä¼šå…ˆæŒ‰ç…§deferçš„åå…¥å…ˆå‡ºçš„é¡ºåºæ‰§è¡Œï¼Œæœ€åæ‰ä¼šæ‰§è¡Œpanicã€‚</p>
<h2 id="recover">recover</h2>
<p>recover åªèƒ½åœ¨ defer é‡Œä¼šç”Ÿæ•ˆ</p>
<ul>
<li><code>panic</code> åªä¼šè§¦å‘å½“å‰ Goroutine çš„ <code>defer</code>ï¼›</li>
<li><code>recover</code> åªæœ‰åœ¨ <code>defer</code> ä¸­è°ƒç”¨æ‰ä¼šç”Ÿæ•ˆï¼›</li>
<li><code>panic</code> å…è®¸åœ¨ <code>defer</code> ä¸­åµŒå¥—å¤šæ¬¡è°ƒç”¨ï¼›</li>
</ul>
<h2 id="internal-package">internal package</h2>
<h2 id="type-assertions">Type assertions</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ff79c6">package</span> main

<span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;fmt&#34;</span>

<span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">main</span>() {
	<span style="color:#8be9fd;font-style:italic">var</span> i <span style="color:#8be9fd;font-style:italic">interface</span>{} = <span style="color:#f1fa8c">&#34;hello&#34;</span>

	s <span style="color:#ff79c6">:=</span> i.(<span style="color:#8be9fd">string</span>)
	fmt.<span style="color:#50fa7b">Println</span>(s)

	s, ok <span style="color:#ff79c6">:=</span> i.(<span style="color:#8be9fd">string</span>)
	fmt.<span style="color:#50fa7b">Println</span>(s, ok)

	f, ok <span style="color:#ff79c6">:=</span> i.(<span style="color:#8be9fd">float64</span>)
	fmt.<span style="color:#50fa7b">Println</span>(f, ok)

	f = i.(<span style="color:#8be9fd">float64</span>) <span style="color:#6272a4">// panic
</span><span style="color:#6272a4"></span>	fmt.<span style="color:#50fa7b">Println</span>(f)
}

</code></pre></div><h2 id="channel">channel</h2>
<p>Goæä¾›äº†<code>range</code>å…³é”®å­—ï¼Œå°†å…¶ä½¿ç”¨åœ¨channelä¸Šæ—¶ï¼Œä¼šè‡ªåŠ¨ç­‰å¾…channelçš„åŠ¨ä½œä¸€ç›´åˆ°channelè¢«å…³é—­ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">ticker <span style="color:#ff79c6">:=</span> time.<span style="color:#50fa7b">NewTicker</span>(time.Minute <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">5</span>)
<span style="color:#ff79c6">for</span> <span style="color:#ff79c6">range</span> ticker.C {
	<span style="color:#50fa7b">doSomeThing</span>()
}
</code></pre></div><p>å¦‚ä¸‹ä¾‹å­ï¼Œch åˆå§‹åŒ–ä»¥åï¼Œå–å‡ºçš„å€¼é»˜è®¤æ˜¯ falseã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">ctx, cancel <span style="color:#ff79c6">:=</span> context.<span style="color:#50fa7b">WithTimeout</span>(context.<span style="color:#50fa7b">Background</span>(), <span style="color:#bd93f9">3</span><span style="color:#ff79c6">*</span>time.Second)
<span style="color:#ff79c6">defer</span> <span style="color:#50fa7b">cancel</span>()
ch <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">chan</span> <span style="color:#8be9fd">bool</span>)
<span style="color:#ff79c6">go</span> <span style="color:#8be9fd;font-style:italic">func</span>() {
  <span style="color:#ff79c6">defer</span> <span style="color:#8be9fd;font-style:italic">close</span>(ch)
  <span style="color:#6272a4">//å…·ä½“çš„ä»»åŠ¡ï¼Œè¿™é‡Œæ¨¡æ‹Ÿåšçš„ä»»åŠ¡éœ€è¦1ç§’å®Œæˆ
</span><span style="color:#6272a4"></span>  time.<span style="color:#50fa7b">Sleep</span>(time.Second <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">1</span>)
}()
<span style="color:#ff79c6">select</span> {
  <span style="color:#ff79c6">case</span> <span style="color:#ff79c6">&lt;-</span> ch:
  fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;ch bool&#34;</span>, <span style="color:#ff79c6">&lt;-</span> ch)
  <span style="color:#ff79c6">case</span> <span style="color:#ff79c6">&lt;-</span> ctx.<span style="color:#50fa7b">Done</span>():
  fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;ctx done&#34;</span>)
}
<span style="color:#6272a4">// output:
</span><span style="color:#6272a4">// ch bool false
</span></code></pre></div><h3 id="å¸¦ç¼“å†²åŒºå’Œä¸å¸¦ç¼“å†²åŒºçš„åŒº">å¸¦ç¼“å†²åŒºå’Œä¸å¸¦ç¼“å†²åŒºçš„åŒº</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">c1 <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">chan</span> <span style="color:#8be9fd">int</span>)  <span style="color:#6272a4">// ä¸å¸¦ç¼“å†²åŒº
</span><span style="color:#6272a4"></span>c2 <span style="color:#ff79c6">:=</span> <span style="color:#8be9fd;font-style:italic">make</span>(<span style="color:#8be9fd;font-style:italic">chan</span> <span style="color:#8be9fd">int</span>, <span style="color:#bd93f9">100</span>)  <span style="color:#6272a4">// å¸¦ç¼“å†²åŒº
</span></code></pre></div><ul>
<li><strong>éç¼“å†²</strong> <code>channel</code>ï¼Œ<code>channel</code> å‘é€å’Œæ¥æ”¶åŠ¨ä½œæ˜¯åŒæ—¶å‘ç”Ÿçš„
<ul>
<li>ä¾‹å¦‚ <code>ch := make(chan int)</code> ï¼Œå¦‚æœæ²¡ <code>goroutine</code> è¯»å–æ¥æ”¶è€…<code>&lt;-ch</code> ï¼Œé‚£ä¹ˆå‘é€è€…<code>ch&lt;-</code> å°±ä¼šä¸€ç›´é˜»å¡</li>
</ul>
</li>
<li><strong>ç¼“å†²</strong> <code>channel</code> ç±»ä¼¼ä¸€ä¸ªé˜Ÿåˆ—ï¼Œåªæœ‰é˜Ÿåˆ—æ»¡äº†æ‰å¯èƒ½å‘é€é˜»å¡</li>
</ul>
<p>ä¸€ä¸ªç®¡é“åŒæ—¶ä»…å…è®¸è¢«ä¸€ä¸ªåç¨‹è¯»å†™ã€‚</p>
<h2 id="ç‰¹æ®Šæ³¨é‡Š">ç‰¹æ®Šæ³¨é‡Š</h2>
<h3 id="golinkname">go:linkname</h3>
<p>//go:linkname æ³¨é‡Šæ ‡ç­¾å¼•å¯¼ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°†å½“å‰ç§æœ‰å‡½æ•°é“¾æ¥åˆ°æŒ‡å®šçš„ç›®æ ‡å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½œç”¨åˆ°å˜é‡ä¸Šé¢</p>
<p>ä¸¾ä¾‹:</p>
<p>time.Sleep() å£°æ˜åœ¨ time åŒ…ï¼Œä½†æ˜¯å®ç°åœ¨ runtime åŒ…çš„ runtime.timeSleep()</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ff79c6">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> time<span style="color:#ff79c6">/</span>sleep.<span style="color:#ff79c6">go</span> <span style="color:#ff79c6">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
<span style="color:#ff79c6">package</span> time

<span style="color:#6272a4">// Sleep pauses the current goroutine for at least the duration d.
</span><span style="color:#6272a4">// A negative or zero duration causes Sleep to return immediately.
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">Sleep</span>(d Duration)

<span style="color:#ff79c6">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> runtime<span style="color:#ff79c6">/</span>time.<span style="color:#ff79c6">go</span> <span style="color:#ff79c6">&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt;

<span style="color:#6272a4">// timeSleep puts the current goroutine to sleep for at least ns nanoseconds.
</span><span style="color:#6272a4">//go:linkname timeSleep time.Sleep
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">timeSleep</span>(ns <span style="color:#8be9fd">int64</span>) {
	<span style="color:#ff79c6">if</span> ns <span style="color:#ff79c6">&lt;=</span> <span style="color:#bd93f9">0</span> {
		<span style="color:#ff79c6">return</span>
	}

	gp <span style="color:#ff79c6">:=</span> <span style="color:#50fa7b">getg</span>()
	t <span style="color:#ff79c6">:=</span> gp.timer
	<span style="color:#ff79c6">if</span> t <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">nil</span> {
		t = <span style="color:#8be9fd;font-style:italic">new</span>(timer)
		gp.timer = t
	}
	t.f = goroutineReady
	t.arg = gp
	t.nextwhen = <span style="color:#50fa7b">nanotime</span>() <span style="color:#ff79c6">+</span> ns
	<span style="color:#50fa7b">gopark</span>(resetForSleep, unsafe.<span style="color:#50fa7b">Pointer</span>(t), waitReasonSleep, traceEvGoSleep, <span style="color:#bd93f9">1</span>)
}
</code></pre></div><p>æ³¨æ„ï¼š</p>
<p>è¿™ç§æ–¹å¼å¤§éƒ¨åˆ†åªåœ¨ go æºç ä¸­ä¼šç”¨åˆ°ï¼Œå¦‚æœè¦è‡ªå·±å†™çš„è¯ï¼Œéœ€è¦å¼•å…¥ unsafe åŒ…ï¼ŒåŒæ—¶å› ä¸º<code>go build</code>é»˜è®¤åŠ ä¼šåŠ ä¸Š<code>-complete</code>å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ£€æŸ¥åˆ°æ²¡æœ‰æ–¹æ³•ä½“ï¼Œåœ¨åŒçº§æ–‡ä»¶å¤¹ä¸­è¿˜éœ€è¦å¢åŠ ä¸€ä¸ªç©ºçš„<code>.s</code>æ–‡ä»¶æ‰èƒ½ç»•è¿‡è¿™ä¸ªé™åˆ¶</p>
<h3 id="gonoescape">go:noescape</h3>
<p>è¯¥æŒ‡ä»¤æŒ‡å®šä¸‹ä¸€ä¸ªæœ‰å£°æ˜ä½†æ²¡æœ‰ä¸»ä½“ï¼ˆæ„å‘³ç€å®ç°æœ‰å¯èƒ½ä¸æ˜¯ Goï¼‰çš„å‡½æ•°ï¼Œä¸å…è®¸ç¼–è¯‘å™¨å¯¹å…¶åšé€ƒé€¸åˆ†æã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¯¥æŒ‡ä»¤ç”¨äºå†…å­˜åˆ†é…ä¼˜åŒ–ã€‚å› ä¸ºç¼–è¯‘å™¨é»˜è®¤ä¼šè¿›è¡Œé€ƒé€¸åˆ†æï¼Œä¼šé€šè¿‡è§„åˆ™åˆ¤å®šä¸€ä¸ªå˜é‡æ˜¯åˆ†é…åˆ°å †ä¸Šè¿˜æ˜¯æ ˆä¸Šã€‚ä½†å‡¡äº‹æœ‰æ„å¤–ï¼Œä¸€äº›å‡½æ•°è™½ç„¶é€ƒé€¸åˆ†æå…¶æ˜¯å­˜æ”¾åˆ°å †ä¸Šã€‚ä½†æ˜¯å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œå®ƒæ˜¯ç‰¹åˆ«çš„ã€‚æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>go:noescape</code> æŒ‡ä»¤å¼ºåˆ¶è¦æ±‚ç¼–è¯‘å™¨å°†å…¶åˆ†é…åˆ°å‡½æ•°æ ˆä¸Šã€‚</p>
<h2 id="named-return-value">named return value</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">f</span>() (i <span style="color:#8be9fd">int</span>, s <span style="color:#8be9fd">string</span>) {
    i = <span style="color:#bd93f9">17</span>
    s = <span style="color:#f1fa8c">&#34;abc&#34;</span>
    <span style="color:#ff79c6">return</span> <span style="color:#6272a4">// same as return i, s
</span><span style="color:#6272a4"></span>}
</code></pre></div><p><a href="https://tour.golang.org/basics/7">https://tour.golang.org/basics/7</a></p>
<p><a href="https://yourbasic.org/golang/named-return-values-parameters/">https://yourbasic.org/golang/named-return-values-parameters/</a></p>
<h2 id="æ•°å­¦è®¡ç®—">æ•°å­¦è®¡ç®—</h2>
<h2 id="ä½ç§»è®¡ç®—">ä½ç§»è®¡ç®—</h2>
<h2 id="cgo">CGo</h2>
<p>ä¸¾ä¾‹</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ff79c6">package</span> rand

<span style="color:#6272a4">/*
</span><span style="color:#6272a4">#include &lt;stdlib.h&gt;
</span><span style="color:#6272a4">*/</span>
<span style="color:#ff79c6">import</span> <span style="color:#f1fa8c">&#34;C&#34;</span>

<span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">Random</span>() <span style="color:#8be9fd">int</span> {
    <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">int</span>(C.<span style="color:#50fa7b">random</span>())
}

<span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">Seed</span>(i <span style="color:#8be9fd">int</span>) {
    C.<span style="color:#50fa7b">srandom</span>(C.<span style="color:#8be9fd;font-style:italic">uint</span>(i))
}
</code></pre></div></article>
 
      <div>
    <span style="float:left">
    
        
    
    </span>
    <span style="float:right">
    
        
    
    </span>
</div>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css" integrity="sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js" integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH" crossorigin="anonymous"></script>


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js" integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
              delimiters: [
                  {left: "$$", right: "$$", display: true},
                  {left: "$", right: "$", display: false},
                  {left: "\\(", right: "\\)", display: false},
                  {left: "\\[", right: "\\]", display: true}
              ]
          });
    });
</script>


      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function select(element){const selection=window.getSelection();const range=document.createRange();range.selectNodeContents(element);selection.removeAllRanges();selection.addRange(range);}
document.querySelectorAll("pre code").forEach(code=>{code.addEventListener("click",function(event){select(code.parentElement);if(navigator.clipboard){navigator.clipboard.writeText(code.parentElement.textContent);}});});})();</script>


 
        
      </footer>

      
  
  <div class="book-comments">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yindongliang" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#for-å¾ªç¯">for å¾ªç¯</a></li>
        <li><a href="#è¿›åˆ¶">è¿›åˆ¶</a>
          <ul>
            <li><a href="#åå…­è¿›åˆ¶">åå…­è¿›åˆ¶</a></li>
            <li><a href="#å…«è¿›åˆ¶">å…«è¿›åˆ¶</a></li>
          </ul>
        </li>
        <li><a href="#å•å¼•å·">å•å¼•å·</a></li>
        <li><a href="#ä¼ å€¼å’Œä¼ å¼•ç”¨">ä¼ å€¼å’Œä¼ å¼•ç”¨</a></li>
        <li><a href="#select">select</a></li>
        <li><a href="#itoa">itoa</a></li>
        <li><a href="#slice-åˆ‡ç‰‡å’Œæ•°ç»„">slice åˆ‡ç‰‡å’Œæ•°ç»„</a></li>
        <li><a href="#defer">defer</a></li>
        <li><a href="#panic">panic</a></li>
        <li><a href="#recover">recover</a></li>
        <li><a href="#internal-package">internal package</a></li>
        <li><a href="#type-assertions">Type assertions</a></li>
        <li><a href="#channel">channel</a>
          <ul>
            <li><a href="#å¸¦ç¼“å†²åŒºå’Œä¸å¸¦ç¼“å†²åŒºçš„åŒº">å¸¦ç¼“å†²åŒºå’Œä¸å¸¦ç¼“å†²åŒºçš„åŒº</a></li>
          </ul>
        </li>
        <li><a href="#ç‰¹æ®Šæ³¨é‡Š">ç‰¹æ®Šæ³¨é‡Š</a>
          <ul>
            <li><a href="#golinkname">go:linkname</a></li>
            <li><a href="#gonoescape">go:noescape</a></li>
          </ul>
        </li>
        <li><a href="#named-return-value">named return value</a></li>
        <li><a href="#æ•°å­¦è®¡ç®—">æ•°å­¦è®¡ç®—</a></li>
        <li><a href="#ä½ç§»è®¡ç®—">ä½ç§»è®¡ç®—</a></li>
        <li><a href="#cgo">CGo</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












